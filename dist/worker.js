function countLeadingZeroBits(e){let t=0;for(let s=0;s<e.length;s++){const n=parseInt(e[s],16);if(0!==n){t+=Math.clz32(n)-28;break}t+=4}return t}importScripts("https://bundle.run/noble-secp256k1@1.2.14"),self.onmessage=function(e){const{event:t,powTarget:s}=e.data;let n=0,o=0,a=0;for(;;){const e=JSON.parse(JSON.stringify(t));e.tags.push(["nonce",n.toString()]);const i=JSON.stringify(e),p=noble.secp256k1.utils.bytesToHex(noble.secp256k1.utils.sha256(i));o++;const r=countLeadingZeroBits(p);if(r>a&&(a=r,self.postMessage({type:"update",hashCount:o,bestPoW:a})),r>=s){e.id=p,self.postMessage({type:"result",event:e});break}n++,o%1e3==0&&self.postMessage({type:"update",hashCount:o,bestPoW:a})}};